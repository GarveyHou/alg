<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>
    // class f {
    //   constructor() {
    //     this.p = new Promise((resolve, reject) => {
    //       this.resolve = resolve
    //       this.reject = reject
    //     })
    //   }
    //   promise() {
    //     return this.p
    //   }
    // }
    // let ff = new f()
    // console.log(ff)
    // // ff.resolve()
    // let pp = ff.promise()
    // console.log(pp)

    // ff.resolve(123)
    // console.log(pp)
    // function fn() {
    //   Promise.resolve().then(() => {
    //     return new Promise((resolve, reject) => {
    //       setTimeout(() => {
    //         localStorage.clear()
    //         resolve()
    //       }, 5000)
    //     })
    //   }).then(() => {
    //     fn()
    //   })
    // }

    class MyLocalStorage {

      constructor() {
        this.map = new Map()
      }

      setItem(key, value) {
        this.map.set(key, value)

        setTimeout(() => {
          this.removeItem(key)
        }, 5000)
      }

      getItem(key) {
        return this.map.get(key)
      }

      removeItem(key) {
        this.map.delete(key)
      }
    }
    let lc = new MyLocalStorage()
    lc.setItem(1, 2)
    setInterval(() => {
      console.log(lc.getItem(1))
    }, 1000)
    // console.log(lc.getItem(1))



    // const p = new Promise((resolve, reject) => {
    //   throw new Error('123')
    // })
    // console.log(p.catch(() => console.log('888')))

  </script>

</body>

</html>